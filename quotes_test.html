<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker Quotes Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .mood-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .quote {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .quote-text {
            font-style: italic;
            font-size: 16px;
            margin-bottom: 8px;
            color: #333;
        }
        .quote-author {
            text-align: right;
            font-weight: bold;
            color: #666;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        .error {
            color: #f44336;
            background: #ffebee;
            padding: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß† Mood Tracker Quotes API Test</h1>
        <p>Testing the new ZenQuotes API integration for mood-specific motivational quotes.</p>
        
        <div>
            <button onclick="testAllMoods()">Test All Moods</button>
            <button onclick="testSingleQuote()">Test Single Quote</button>
            <button onclick="clearResults()">Clear Results</button>
        </div>
    </div>

    <div id="results"></div>

    <script>
        // ZenQuotes API test functions
        async function fetchQuoteFromAPI() {
            try {
                const response = await fetch('https://zenquotes.io/api/random');
                if (response.ok) {
                    const data = await response.json();
                    return {
                        text: data[0].q.trim(),
                        author: data[0].a.trim()
                    };
                }
                throw new Error('API response not ok');
            } catch (error) {
                console.error('API Error:', error);
                return null;
            }
        }

        function getFallbackQuotes(moodType) {
            const moodQuotes = {
                'happy': [
                    { text: "Happiness is not something ready made. It comes from your own actions.", author: "Dalai Lama" },
                    { text: "The purpose of our lives is to be happy.", author: "Dalai Lama" }
                ],
                'sad': [
                    { text: "The wound is the place where the Light enters you.", author: "Rumi" },
                    { text: "This too shall pass.", author: "Persian Proverb" }
                ],
                'anxious': [
                    { text: "You have power over your mind - not outside events.", author: "Marcus Aurelius" },
                    { text: "Peace comes from within. Do not seek it without.", author: "Buddha" }
                ]
            };

            return moodQuotes[moodType] || [
                { text: "You are stronger than you think.", author: "Unknown" },
                { text: "Every day is a new opportunity.", author: "Unknown" }
            ];
        }

        async function getMotivationalQuotes(moodType, count = 2) {
            const quotes = [];
            
            // Try to get quotes from API
            for (let i = 0; i < count; i++) {
                const quote = await fetchQuoteFromAPI();
                if (quote) {
                    quotes.push(quote);
                    // Small delay between requests
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
            }
            
            // If API failed, use fallback
            if (quotes.length === 0) {
                return getFallbackQuotes(moodType).slice(0, count);
            }
            
            return quotes;
        }

        async function testSingleQuote() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML += '<div class="test-container"><h3>üß™ Testing Single Quote...</h3><div class="loading">Loading...</div></div>';
            
            try {
                const quotes = await getMotivationalQuotes('happy', 1);
                const lastContainer = resultsDiv.lastElementChild;
                lastContainer.innerHTML = `
                    <h3>‚úÖ Single Quote Test Results</h3>
                    <div class="quote">
                        <div class="quote-text">"${quotes[0].text}"</div>
                        <div class="quote-author">‚Äî ${quotes[0].author}</div>
                    </div>
                `;
            } catch (error) {
                const lastContainer = resultsDiv.lastElementChild;
                lastContainer.innerHTML = `
                    <h3>‚ùå Single Quote Test Failed</h3>
                    <div class="error">Error: ${error.message}</div>
                `;
            }
        }

        async function testAllMoods() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML += '<div class="test-container"><h3>üåà Testing All Moods...</h3><div class="loading">Loading...</div></div>';
            
            const moods = ['happy', 'sad', 'anxious', 'angry', 'excited', 'stressed'];
            const testResults = [];

            for (const mood of moods) {
                try {
                    const quotes = await getMotivationalQuotes(mood, 2);
                    testResults.push({
                        mood,
                        success: true,
                        quotes
                    });
                } catch (error) {
                    testResults.push({
                        mood,
                        success: false,
                        error: error.message
                    });
                }
                
                // Delay between mood tests
                await new Promise(resolve => setTimeout(resolve, 200));
            }

            // Display results
            const lastContainer = resultsDiv.lastElementChild;
            let resultsHTML = '<h3>üéØ All Moods Test Results</h3>';
            
            testResults.forEach(result => {
                if (result.success) {
                    resultsHTML += `
                        <div class="mood-card">
                            <h4>üòä ${result.mood.toUpperCase()} (‚úÖ Success)</h4>
                            ${result.quotes.map(quote => `
                                <div class="quote">
                                    <div class="quote-text">"${quote.text}"</div>
                                    <div class="quote-author">‚Äî ${quote.author}</div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    resultsHTML += `
                        <div class="mood-card">
                            <h4>üòî ${result.mood.toUpperCase()} (‚ùå Failed)</h4>
                            <div class="error">Error: ${result.error}</div>
                        </div>
                    `;
                }
            });
            
            lastContainer.innerHTML = resultsHTML;
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        // Auto-run a quick test on page load
        window.addEventListener('load', () => {
            console.log('üéØ Mood Tracker Quotes Test Page Loaded');
            console.log('Click the buttons above to test the quotes functionality!');
        });
    </script>
</body>
</html>