<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Function Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-4">Game Function Test</h1>
        <button onclick="testSmileChallenge()" class="bg-blue-500 text-white px-4 py-2 rounded mr-2">Test Smile Challenge</button>
    </div>

    <script>
        // Define game functions globally to avoid eval issues
        window.smileGameActive = false;
        window.smileScore = 0;
        
        window.startSmileChallenge = function() {
            if (window.smileGameActive) return;
            
            window.smileGameActive = true;
            window.smileScore = 0;
            let timeLeft = 30;
            
            const scoreElement = document.getElementById('smile-score');
            const timeElement = document.getElementById('time-left');
            
            if (scoreElement) scoreElement.textContent = window.smileScore;
            if (timeElement) timeElement.textContent = timeLeft;
            
            const timer = setInterval(() => {
                timeLeft--;
                if (timeElement) timeElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    window.smileGameActive = false;
                    alert('ðŸŽ‰ Challenge Complete! You made ' + window.smileScore + ' smile faces! Great job boosting your mood! ðŸ˜„');
                }
            }, 1000);
        };
        
        window.makeSmileFace = function(emoji) {
            if (!window.smileGameActive) {
                alert('Click "Start Challenge!" first! ðŸŽ®');
                return;
            }
            
            window.smileScore++;
            const scoreElement = document.getElementById('smile-score');
            const mirrorElement = document.getElementById('smile-mirror');
            
            if (scoreElement) scoreElement.textContent = window.smileScore;
            if (mirrorElement) {
                const emojiDiv = mirrorElement.querySelector('div');
                if (emojiDiv) emojiDiv.textContent = emoji;
                
                // Add fun animation
                mirrorElement.classList.add('animate-pulse');
                setTimeout(() => mirrorElement.classList.remove('animate-pulse'), 500);
            }
        };

        function testSmileChallenge() {
            // Create modal exactly like in the component
            const gameModal = document.createElement('div')
            gameModal.id = 'instant-game-modal'
            gameModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4'
            
            // Use string concatenation instead of complex template literal
            let gameContent = '<div class="bg-gradient-to-br from-yellow-50 to-pink-50 rounded-2xl p-8 max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl">';
            gameContent += '<div class="flex justify-between items-center mb-6">';
            gameContent += '<h3 class="text-3xl font-bold text-pink-900">ðŸ˜„ Instant Smile Challenge Game</h3>';
            gameContent += '<button onclick="document.getElementById(\'instant-game-modal\').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>';
            gameContent += '</div>';
            
            gameContent += '<div class="text-center mb-6">';
            gameContent += '<p class="text-lg text-pink-700 mb-4">ðŸŽ® No login required â€¢ Instant play â€¢ Mood boosting fun!</p>';
            gameContent += '</div>';

            gameContent += '<div class="bg-white rounded-xl p-6 mb-6 border-2 border-pink-200">';
            gameContent += '<div class="text-center">';
            gameContent += '<div class="w-64 h-64 mx-auto mb-6 bg-gradient-to-r from-yellow-200 to-pink-200 rounded-full flex items-center justify-center relative overflow-hidden border-4 border-pink-300" id="smile-mirror">';
            gameContent += '<div class="text-8xl animate-bounce">ðŸ˜Š</div>';
            gameContent += '<div class="absolute bottom-4 text-pink-600 font-bold">Your Virtual Mirror!</div>';
            gameContent += '</div>';
            
            gameContent += '<div class="mb-6">';
            gameContent += '<h4 class="text-2xl font-bold text-pink-800 mb-4">ðŸŽ¯ Challenge Progress</h4>';
            gameContent += '<div class="flex justify-center space-x-4">';
            gameContent += '<div class="bg-yellow-100 rounded-lg p-3 text-center">';
            gameContent += '<div class="text-2xl font-bold text-yellow-600" id="smile-score">0</div>';
            gameContent += '<div class="text-sm text-yellow-800">Smiles</div>';
            gameContent += '</div>';
            gameContent += '<div class="bg-pink-100 rounded-lg p-3 text-center">';
            gameContent += '<div class="text-2xl font-bold text-pink-600" id="time-left">30</div>';
            gameContent += '<div class="text-sm text-pink-800">Seconds</div>';
            gameContent += '</div>';
            gameContent += '</div>';
            gameContent += '</div>';

            gameContent += '<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">';
            gameContent += '<button onclick="window.makeSmileFace(\'ðŸ˜€\')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ˜€</button>';
            gameContent += '<button onclick="window.makeSmileFace(\'ðŸ˜ƒ\')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ˜ƒ</button>';
            gameContent += '<button onclick="window.makeSmileFace(\'ðŸ˜„\')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ˜„</button>';
            gameContent += '<button onclick="window.makeSmileFace(\'ðŸ¤£\')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ¤£</button>';
            gameContent += '</div>';

            gameContent += '<div class="flex gap-4 justify-center">';
            gameContent += '<button onclick="window.startSmileChallenge()" class="px-8 py-4 bg-gradient-to-r from-pink-500 to-yellow-500 hover:from-pink-600 hover:to-yellow-600 text-white rounded-xl font-bold text-lg shadow-lg transform transition-all hover:scale-105">';
            gameContent += 'ðŸŽ® Start Challenge!';
            gameContent += '</button>';
            gameContent += '</div>';
            gameContent += '</div>';
            gameContent += '</div>';
            gameContent += '</div>';
            
            gameModal.innerHTML = gameContent;
            document.body.appendChild(gameModal);
        }
    </script>
</body>
</html>