<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameUV Platform - Smile Challenge Integration Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-4">GameUV Platform - Smile Challenge Test</h1>
        <button onclick="launchSmileChallenge()" class="bg-purple-500 text-white px-6 py-3 rounded-lg mr-2 hover:bg-purple-600 transition-all">
            ðŸŒŸ Launch Smile Challenge
        </button>
        <p class="text-sm text-gray-600 mt-4">
            This test simulates launching the Smile Challenge from within the Mental Health GameUV platform.
        </p>
    </div>

    <script>
        // Simulate the GameUV platform functionality
        window.smileGameActive = false;
        window.smileScore = 0;
        
        function launchSmileChallenge() {
            // Remove existing modal if present
            const existingModal = document.getElementById('in-platform-game-modal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Create modal
            const gameModal = document.createElement('div');
            gameModal.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4';
            gameModal.id = 'in-platform-game-modal';
            
            gameModal.innerHTML = `
                <div class="bg-gradient-to-br from-yellow-50 to-pink-50 rounded-2xl p-8 max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-3xl font-bold text-pink-900">ðŸ˜„ Smile Challenge - Mood Booster Game</h3>
                        <button onclick="document.getElementById('in-platform-game-modal').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div class="text-center mb-6">
                        <p class="text-lg text-pink-700 mb-4">ðŸŽ® No login required â€¢ Instant play â€¢ Mood boosting fun!</p>
                    </div>

                    <div class="bg-white rounded-xl p-6 mb-6 border-2 border-pink-200">
                        <div class="text-center">
                            <div class="w-64 h-64 mx-auto mb-6 bg-gradient-to-r from-yellow-200 to-pink-200 rounded-full flex items-center justify-center relative overflow-hidden border-4 border-pink-300" id="smile-mirror">
                                <div class="text-8xl animate-bounce">ðŸ˜Š</div>
                                <div class="absolute bottom-4 text-pink-600 font-bold">Your Virtual Mirror!</div>
                            </div>
                            
                            <div class="mb-6">
                                <h4 class="text-2xl font-bold text-pink-800 mb-4">ðŸŽ¯ Challenge Progress</h4>
                                <div class="flex justify-center space-x-4">
                                    <div class="bg-yellow-100 rounded-lg p-3 text-center">
                                        <div class="text-2xl font-bold text-yellow-600" id="smile-score">0</div>
                                        <div class="text-sm text-yellow-800">Smiles</div>
                                    </div>
                                    <div class="bg-pink-100 rounded-lg p-3 text-center">
                                        <div class="text-2xl font-bold text-pink-600" id="time-left">30</div>
                                        <div class="text-sm text-pink-800">Seconds</div>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <button onclick="makeSmileFace('ðŸ˜€')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ˜€</button>
                                <button onclick="makeSmileFace('ðŸ˜ƒ')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ˜ƒ</button>
                                <button onclick="makeSmileFace('ðŸ˜„')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ˜„</button>
                                <button onclick="makeSmileFace('ðŸ¤£')" class="bg-yellow-200 hover:bg-yellow-300 p-4 rounded-lg text-4xl transition-all transform hover:scale-110">ðŸ¤£</button>
                            </div>

                            <div class="flex gap-4 justify-center">
                                <button onclick="startSmileChallenge()" class="px-8 py-4 bg-gradient-to-r from-pink-500 to-yellow-500 hover:from-pink-600 hover:to-yellow-600 text-white rounded-xl font-bold text-lg shadow-lg transform transition-all hover:scale-105">
                                    ðŸŽ® Start Challenge!
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(gameModal);
            initializeSmileChallenge();
        }

        function initializeSmileChallenge() {
            window.smileGameActive = false;
            window.smileScore = 0;
            
            window.startSmileChallenge = function() {
                if (window.smileGameActive) return;
                
                window.smileGameActive = true;
                window.smileScore = 0;
                let timeLeft = 30;
                
                const scoreElement = document.getElementById('smile-score');
                const timeElement = document.getElementById('time-left');
                
                if (scoreElement) scoreElement.textContent = window.smileScore.toString();
                if (timeElement) timeElement.textContent = timeLeft.toString();
                
                const timer = setInterval(() => {
                    timeLeft--;
                    if (timeElement) timeElement.textContent = timeLeft.toString();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        window.smileGameActive = false;
                        alert('ðŸŽ‰ Challenge Complete! You made ' + window.smileScore + ' smile faces! Great job boosting your mood! ðŸ˜„');
                    }
                }, 1000);
            };
            
            window.makeSmileFace = function(emoji) {
                if (!window.smileGameActive) {
                    alert('Click "Start Challenge!" first! ðŸŽ®');
                    return;
                }
                
                window.smileScore++;
                const scoreElement = document.getElementById('smile-score');
                const mirrorElement = document.getElementById('smile-mirror');
                
                if (scoreElement) scoreElement.textContent = window.smileScore.toString();
                if (mirrorElement) {
                    const emojiDiv = mirrorElement.querySelector('div');
                    if (emojiDiv) emojiDiv.textContent = emoji;
                    
                    // Add fun animation
                    mirrorElement.classList.add('animate-pulse');
                    setTimeout(() => mirrorElement.classList.remove('animate-pulse'), 500);
                }
            };
        }
        
        // Test the game platform functionality
        console.log('âœ… GameUV Platform Test - Smile Challenge integration ready');
        console.log('ðŸŽ® This simulates how the game launches within the Mental Health Agent');
    </script>
</body>
</html>